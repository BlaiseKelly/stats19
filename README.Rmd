---
output: github_document
bibliography: vignettes/references.bib
---

[![Travis build status](https://travis-ci.org/ITSLeeds/stats19.svg?branch=master)](https://travis-ci.org/ITSLeeds/stats19)

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# stats19

The goal of stats19 is to make it easy to work with road crash data.
Specifically it enables access to and processing of the UK's official road traffic casualty database.

A description of the stats19 data and variables they contain can be found at: http://data.dft.gov.uk/road-accidents-safety-data/Brief-guide-to%20road-accidents-and-safety-data.doc.

It builds on previous work including:

- code in the [bikeR](https://github.com/Robinlovelace/bikeR) repo underlying an academic paper on collisions involving cyclists [@lovelace_who_2016]
- functions in [**stplanr**](https://github.com/ropensci/stplanr/blob/master/R/load-stats19.R) for downloading Stats19 data
- updated functions related to the [CyIPT](https://github.com/cyipt/stats19) project.

## Installation

Install the latest version with:

```{r install, eval=FALSE}
devtools::install_github("ITSLeeds/stats19")
```


<!-- You can install the released version of stats19 from [CRAN](https://CRAN.R-project.org) with: -->

<!-- ``` r -->
<!-- install.packages("stats19") -->
<!-- ``` -->

## Data download

**stats19** enables download of raw stats19 data with `dl_*` functions.
The following code chunk, for example, downloads and unzips a .zip file containing Stats19 data from 2005 to 2014:

```{r example, eval=FALSE}
dl_stats19_2005_2014()
```

Data files from other years can be downloaded with corresponding functions:

```{r, eval=FALSE}
dl_stats19_2015()
```

## Reading-in data

Data can be read-in as follows (assuming the data download went OK):

```{r, eval=FALSE}
d14 = "Stats19_Data_2005-2014"
ac_2005_2014 = read_stats19_2005_2014_ac(data_dir = d14)
ac_2005_2014_f = format_stats19_2005_2014_ac(ac_2005_2014)
d15 = "RoadSafetyData_2015"
ac_2015 = read_stats19_2005_2014_ac(data_dir = d15, filename = "Accidents_2015.csv")
ac_2015_f = format_stats19_2015_ac(ac_2015)
summary(ac_2015$Date)
ac = rbind(ac_2005_2014_f, ac_2015_f)
unique(ac$Accident_Severity)
```

## References
